work in docker

半年前接触到docker,3个月前正式使用。

docker带来了很多惊喜。简单、高效、任意部署!

那时候，只运行了hello world和wordpress.后来，随着docker用的越来越多，问题来了。

我在wordpress容器里想进行一些调试的时候，各种基础的命令都不支持，于是我开始了添加各种工具的历程。有的工具直接安装包，有的工具还需要编译，一编译各种问题来了，编译环境，各种库依赖；而且，不止一个容器需要添加这些工具，所以只能从baseimage上做文章了，在官方的baseimage的基础上做，我做了一个包含各种工具的golden image.

有了golden image，调试终于ok了。新的问题又来了。别人的image还是没有这些工具，别人的dockerfile基于我的golden image无法正常运行了。

为了简单，我的探索之路，重新开始了。salt，以前管理虚机的经验，用自动化部署，需要什么工具，容器运行起来以后，用docker exec把需要的东西从容器里再安装一次。确实，行之有效。

配置文件....脚本....配置文件....脚本，这个时候，我想尝试一下，把我的东西迁移到云上，mac上，这个时候问题出现，宿主部署起来太麻烦了，我只能选择和我宿主一样的虚机才行。我想在boot2docker下模拟我的环境，障碍重重。

我发现我的思路又回到了之前用虚机管理的方式，既然用docker，为什么不能用docker简单的管理这个问题呢，对docker in docker，把salt部署到docker上，把之前的docker都放到这个docker上来管理，一切迎刃而解。

用docker解决docker的问题，把简单进行到底，我索性连salt都抛弃掉，docker -v 加载外层docker的bin和lib，用工具的时候，只需要把加载上来的目录export一下，就可用了。

docker的建立的目的就是简单、高效、方便沟通与复制。

我把思路贡献出来，做了一个小项目，取了一个名字叫carrier，就是想告诉大家

	集装箱如果被你真的改成了航母，那么他用起来，真的没办法像用集装箱一样简单。
